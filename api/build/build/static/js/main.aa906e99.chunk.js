(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(5),u=n.n(c),o=(n(12),n(1)),s=n.n(o),i=n(2),l=n(3),p=n(6),f=function(){var e=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?"?city=".concat(t):"",e.next=3,f("/v1/weather".concat(n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/v1/accounts/".concat(t));case 2:return e.abrupt("return",e.sent.cities);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/v1/accounts/".concat(n,"/cities"),{city:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/v1/accounts/".concat(n,"/cities/").concat(t,"/delete"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/v1/accounts",{name:t,password:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/v1/authenticate",{name:t,password:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/v1/accounts/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=Object(r.useState)([]),n=Object(l.a)(t,2),a=n[0],c=n[1],u=Object(r.useState)(null),o=Object(l.a)(u,2),f=o[0],m=o[1];Object(r.useEffect)(function(){Object(i.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.t0=c,t.next=4,d(e);case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}},t)}))()},[e]);var v=function(){var t=Object(i.a)(s.a.mark(function t(n){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&!a.find(function(e){return e.city===n})){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,b(n);case 4:if(!(r=t.sent).error){t.next=7;break}return t.abrupt("return",m(r.error));case 7:c(function(e){return[].concat(Object(p.a)(e),[r])}),e&&h(n,e);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return{cities:a,error:f,addCity:v,removeCity:function(){var t=Object(i.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c(function(e){return e.filter(function(e){return e.city!==n})}),e&&y(n,e);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},E=function(e){var t=e.account,n=e.setAccount,c=e.setToken,u=(e.persistCityList,Object(r.useState)(null)),o=Object(l.a)(u,2),p=o[0],f=o[1],m=Object(r.useRef)(),b=Object(r.useRef)(),d=Object(r.useRef)(),h=function(){var e=Object(i.a)(s.a.mark(function e(t){var r,a,u,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=d.current?d.current.checked:null,a=m.current?m.current.value:null,u=b.current?b.current.value:null,a&&u){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=12;break}return e.next=9,v(a,u);case 9:o=e.sent,e.next=15;break;case 12:return e.next=14,w(a,u);case 14:o=e.sent;case 15:if(console.log(o),!o.error){e.next=19;break}return f(o.error),e.abrupt("return");case 19:o.token&&c(o.token),o.tokens&&c(o.tokens[0]),o.name&&n(o);case 22:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return t&&t.name?a.a.createElement("aside",{className:"logged-in"},a.a.createElement("span",null,"Logged in as ",t.name),a.a.createElement("button",{onClick:function(){return c(null)}},"Logout")):a.a.createElement("aside",{className:"authenticate"},p&&a.a.createElement("p",{onClick:function(){return f(null)}},p),a.a.createElement("form",{onSubmit:h},a.a.createElement("input",{ref:m,type:"text",placeholder:"Account name..."}),a.a.createElement("input",{ref:b,type:"password",placeholder:"Password..."}),a.a.createElement("div",null,a.a.createElement("input",{ref:d,id:"signup",type:"checkbox"}),a.a.createElement("label",{htmlFor:"signup"},"This is a new account")),a.a.createElement("button",{type:"submit"},"Authenticate")))},j=function(e){window.speechSynthesis&&window.SpeechSynthesisUtterance&&speechSynthesis.speak(new SpeechSynthesisUtterance(e))},O=function(e){var t=e.cities,n=e.removeCity;return a.a.createElement("section",{className:"cities-list-container"},a.a.createElement("header",null,!!t.length&&a.a.createElement("button",{onClick:function(){return t.forEach(function(e){return j(function(e){var t=e.city,n=(e.condition,e.expect),r=e.temperature,a=e.cloudy,c=e.windy;return"Expect ".concat(n," in ").concat(t,". It's ").concat(r," outside, ").concat(a," cloudy, and ").concat(c," windy.")}(e))})}},"Audio (All)")),a.a.createElement("main",{className:"cities-list"},t.map(function(e,r){var c=e.city,u=e.condition,o=e.expect,s=e.temperature,i=e.cloudy,l=e.windy,p="Expect ".concat(o," in ").concat(c,". It's ").concat(s," outside, ").concat(i," cloudy, and ").concat(l," windy.");return a.a.createElement("article",{key:c,className:"city-card",styles:{animationDelay:"".concat(t.length-r,"s")}},a.a.createElement("main",null,a.a.createElement("h2",null,e.city),a.a.createElement("h3",null,u),a.a.createElement("p",null,p)),a.a.createElement("footer",null,a.a.createElement("button",{onClick:function(){return j(p)}},"Audio"),a.a.createElement("button",{onClick:function(){return n(e.city)}},"Delete")))})))},S=(n(15),function(){var e=Object(r.useState)(localStorage.getItem("token")),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(null),o=Object(l.a)(u,2),p=o[0],f=o[1];Object(r.useEffect)(function(){n?Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,k(n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e)}))():f(null)},[n]);var m=Object(r.useRef)(),b=x(n),d=b.cities,h=b.addCity,y=b.removeCity,v=b.persistCityList;return a.a.createElement("main",{className:"app"},a.a.createElement("h1",null,"Weather Peek"),a.a.createElement("p",null,"A weather dashboard for folks who can't be bothered with pesky numbers."),a.a.createElement("p",null,"Create a list of cities. Make an account to save your list and view it on any device."),a.a.createElement(E,{account:p,setAccount:f,setToken:function(e){localStorage.setItem("token",e),c(e)},persistCityList:v}),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h(m.current?m.current.value:null)}},a.a.createElement("input",{ref:m,type:"text",placeholder:"Enter city name..."}),a.a.createElement("button",{type:"submit"},"Get weather for city")),a.a.createElement(O,{cities:d,removeCity:y}))});u.a.render(a.a.createElement(S,null),document.getElementById("root"))},7:function(e,t,n){e.exports=n(16)}},[[7,1,2]]]);
//# sourceMappingURL=main.aa906e99.chunk.js.map